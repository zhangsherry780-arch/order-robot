# ğŸ½ï¸ å…¬å¸è®¢é¤ç³»ç»Ÿ

ä¸€ä¸ªå®Œæ•´çš„å…¬å¸å†…éƒ¨è®¢é¤ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒæ™ºèƒ½èœå•ç”Ÿæˆã€è®¢é¤ç»Ÿè®¡ã€å‘˜å·¥è¯„ä»·ç­‰åŠŸèƒ½ã€‚

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… **æ™ºèƒ½èœå•ç”Ÿæˆ** - æ¯å‘¨ä¸€è‡ªåŠ¨ç”ŸæˆåŸºäºè¯„åˆ†çš„æ™ºèƒ½èœå•
- âœ… **è®¢é¤ç»Ÿè®¡** - å®æ—¶ç»Ÿè®¡åˆ/æ™šé¤è®¢é¤äººæ•°
- âœ… **å‘˜å·¥è¯„ä»·** - æ”¯æŒèœå“æ‰“åˆ†(1-5)å’Œå»ºè®®åé¦ˆ
- âœ… **ä¸åƒç™»è®°** - æ¯å¤©10:00/16:00å¼€æ”¾ç™»è®°å…¥å£
- âœ… **ç®¡ç†åå°** - å‘˜å·¥ã€èœå“ã€ç³»ç»Ÿé…ç½®ç®¡ç†
- âœ… **æ•°æ®å¯¼å‡º** - æ”¯æŒå„ç±»æ•°æ®å¯¼å‡º
- âœ… **æœºå™¨äººæ¥å£** - JSON APIä¾›é£ä¹¦/ä¼ä¸šå¾®ä¿¡é›†æˆ

### å®šæ—¶ä»»åŠ¡
- ğŸ•˜ æ¯å‘¨ä¸€ 09:00 è‡ªåŠ¨ç”Ÿæˆæœ¬å‘¨èœå•
- ğŸ•™ æ¯å¤© 10:00 å¼€æ”¾åˆé¤ä¸åƒç™»è®°
- ğŸ• æ¯å¤© 16:00 å¼€æ”¾æ™šé¤ä¸åƒç™»è®°

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚
- Node.js >= 16.0
- æ— éœ€æ•°æ®åº“(ä½¿ç”¨JSONæ–‡ä»¶å­˜å‚¨)

### å®‰è£…éƒ¨ç½²

1. **å…‹éš†é¡¹ç›®**
```bash
# å¦‚æœæ˜¯ä»GitHubå…‹éš†
git clone <repository-url>
cd order-robot

# å¦‚æœæ˜¯è§£å‹æ–‡ä»¶åŒ…
cd order-robot
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install
```

3. **å¯åŠ¨æœåŠ¡**
```bash
# å¼€å‘ç¯å¢ƒ
npm run dev

# ç”Ÿäº§ç¯å¢ƒ
npm start
```

4. **è®¿é—®ç³»ç»Ÿ**
- ç”¨æˆ·ç«¯: http://localhost:3000
- ç®¡ç†åå°: http://localhost:3000/admin.html
- æœºå™¨äººAPI: http://localhost:3000/api/bot

## ğŸ“± ä½¿ç”¨è¯´æ˜

### ç”¨æˆ·ç«¯åŠŸèƒ½
1. **æŸ¥çœ‹ä»Šæ—¥èœå•** - æ˜¾ç¤ºå½“å¤©åˆé¤å’Œæ™šé¤èœå•
2. **ä¸åƒç™»è®°** - è¾“å…¥å§“åé€‰æ‹©é¤æ¬¡è¿›è¡Œä¸åƒç™»è®°
3. **èœå“è¯„ä»·** - ç‚¹å‡»èœå“å¡ç‰‡è¿›è¡Œæ‰“åˆ†å’Œå»ºè®®
4. **æŸ¥çœ‹ç»Ÿè®¡** - å®æ—¶æ˜¾ç¤ºè®¢é¤äººæ•°ç»Ÿè®¡
5. **æœ¬å‘¨èœå•** - æŸ¥çœ‹å®Œæ•´å‘¨èœå•

### ç®¡ç†åå°åŠŸèƒ½
1. **ç»Ÿè®¡æ¦‚è§ˆ** - ä»Šæ—¥è®¢é¤æ•°æ®æ€»è§ˆ
2. **å‘˜å·¥ç®¡ç†** - å¢åˆ æ”¹æŸ¥å‘˜å·¥ä¿¡æ¯
3. **èœå“ç®¡ç†** - ç®¡ç†èœå“åº“ï¼Œæ‰‹åŠ¨ç”Ÿæˆèœå•
4. **ç³»ç»Ÿè®¾ç½®** - é…ç½®æ€»äººæ•°ã€å®šæ—¶ä»»åŠ¡æ—¶é—´ç­‰
5. **æ•°æ®å¯¼å‡º** - å¯¼å‡ºå„ç±»ä¸šåŠ¡æ•°æ®

### æœºå™¨äººAPIæ¥å£
```bash
# è·å–ä»Šæ—¥èœå•
GET /api/bot/menu/today

# è·å–ä»Šæ—¥ç»Ÿè®¡
GET /api/bot/stats/today

# ç¤ºä¾‹å“åº”
{
  "success": true,
  "data": {
    "lunch": [...],
    "dinner": [...],
    "date": "2024-01-15"
  }
}
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç³»ç»Ÿè®¾ç½®(å¯åœ¨ç®¡ç†åå°ä¿®æ”¹)
- `totalEmployees`: å…¬å¸æ€»äººæ•° (é»˜è®¤50)
- `lunchOpenTime`: åˆé¤ç™»è®°å¼€æ”¾æ—¶é—´ (é»˜è®¤10:00)
- `dinnerOpenTime`: æ™šé¤ç™»è®°å¼€æ”¾æ—¶é—´ (é»˜è®¤16:00)
- `menuGenerateTime`: èœå•ç”Ÿæˆæ—¶é—´ (é»˜è®¤09:00)

### æ•°æ®æ–‡ä»¶ç»“æ„
```
data/
â”œâ”€â”€ employees.json        # å‘˜å·¥æ•°æ®
â”œâ”€â”€ dishes.json          # èœå“æ•°æ®
â”œâ”€â”€ weekly-menus.json    # å‘¨èœå•
â”œâ”€â”€ daily-orders.json    # æ¯æ—¥è®¢é¤ç»Ÿè®¡
â”œâ”€â”€ no-eat-registrations.json  # ä¸åƒç™»è®°
â”œâ”€â”€ ratings.json         # èœå“è¯„ä»·
â””â”€â”€ settings.json        # ç³»ç»Ÿè®¾ç½®
```

## ğŸ”— å¤–éƒ¨ç³»ç»Ÿé›†æˆ

### é£ä¹¦æœºå™¨äººé›†æˆç¤ºä¾‹
```javascript
// è·å–ä»Šæ—¥èœå•æ¨é€
const response = await fetch('http://your-server:3000/api/bot/menu/today');
const menuData = await response.json();

// å‘é€åˆ°é£ä¹¦ç¾¤
if (menuData.success) {
  const message = formatMenuMessage(menuData.data);
  await sendToFeishu(message);
}
```

### ä¼ä¸šå¾®ä¿¡æœºå™¨äººé›†æˆ
```python
import requests

# è·å–è®¢é¤ç»Ÿè®¡
response = requests.get('http://your-server:3000/api/bot/stats/today')
stats = response.json()

# æ¨é€ç»Ÿè®¡ä¿¡æ¯
if stats['success']:
    send_to_wechat_work(format_stats_message(stats['data']))
```

## ğŸ“Š éƒ¨ç½²å»ºè®®

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

1. **ä½¿ç”¨PM2ç®¡ç†è¿›ç¨‹**
```bash
npm install -g pm2
pm2 start server.js --name "order-robot"
pm2 startup
pm2 save
```

2. **Nginxåå‘ä»£ç†é…ç½®**
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

3. **æ•°æ®å¤‡ä»½è„šæœ¬**
```bash
#!/bin/bash
# backup-data.sh
DATE=$(date +%Y%m%d_%H%M%S)
tar -czf "backup_${DATE}.tar.gz" data/
# å¯é…ç½®åˆ°cronå®šæœŸæ‰§è¡Œ
```

### Dockeréƒ¨ç½²(å¯é€‰)
```dockerfile
FROM node:16
WORKDIR /app
COPY package*.json ./
RUN npm install --production
COPY . .
EXPOSE 3000
CMD ["npm", "start"]
```

## ğŸ› ï¸ å¼€å‘è¯´æ˜

### é¡¹ç›®ç»“æ„
```
order-robot/
â”œâ”€â”€ server.js           # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â”œâ”€â”€ package.json        # é¡¹ç›®é…ç½®
â”œâ”€â”€ data/              # æ•°æ®å­˜å‚¨ç›®å½•
â”œâ”€â”€ public/            # å‰ç«¯é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html     # ç”¨æˆ·ç«¯é¡µé¢
â”‚   â””â”€â”€ admin.html     # ç®¡ç†åå°é¡µé¢
â””â”€â”€ README.md          # é¡¹ç›®æ–‡æ¡£
```

### æŠ€æœ¯æ ˆ
- **åç«¯**: Node.js + Express + JSONæ–‡ä»¶å­˜å‚¨
- **å‰ç«¯**: Vue 3 + Element Plus + å“åº”å¼è®¾è®¡
- **å®šæ—¶ä»»åŠ¡**: node-cron
- **å·¥å…·åº“**: moment.js, fs-extra

### APIæ¥å£æ–‡æ¡£

#### ç”¨æˆ·ç«¯æ¥å£
- `GET /api/menu/today` - ä»Šæ—¥èœå•
- `GET /api/menu/week` - æœ¬å‘¨èœå•  
- `POST /api/no-eat/register` - ä¸åƒç™»è®°
- `DELETE /api/no-eat/cancel` - å–æ¶ˆç™»è®°
- `GET /api/order/stats/today` - ä»Šæ—¥ç»Ÿè®¡
- `POST /api/rating/submit` - æäº¤è¯„ä»·

#### ç®¡ç†ç«¯æ¥å£
- `GET /api/admin/stats` - ç»Ÿè®¡æ¦‚è§ˆ
- `GET/POST/PUT/DELETE /api/admin/employees` - å‘˜å·¥ç®¡ç†
- `GET/POST/PUT/DELETE /api/admin/dishes` - èœå“ç®¡ç†
- `GET/PUT /api/admin/settings` - ç³»ç»Ÿè®¾ç½®
- `POST /api/admin/menu/generate` - ç”Ÿæˆèœå•
- `GET /api/admin/export/*` - æ•°æ®å¯¼å‡º

#### æœºå™¨äººæ¥å£
- `GET /api/bot/menu/today` - ä»Šæ—¥èœå•JSON
- `GET /api/bot/stats/today` - ä»Šæ—¥ç»Ÿè®¡JSON

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### å¸¸è§é—®é¢˜
1. **Q: èœå•æ²¡æœ‰è‡ªåŠ¨ç”Ÿæˆ?**
   A: æ£€æŸ¥æ˜¯å¦æœ‰å¯ç”¨èœå“ï¼Œç¡®è®¤å®šæ—¶ä»»åŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ

2. **Q: ä¸åƒç™»è®°ä¸èƒ½æäº¤?**
   A: ç¡®è®¤å½“å‰æ—¶é—´æ˜¯å¦åœ¨å¼€æ”¾æ—¶é—´å†…ï¼Œæ£€æŸ¥å§“åæ˜¯å¦å·²ç™»è®°

3. **Q: æ•°æ®ä¸¢å¤±æ€ä¹ˆåŠ?**
   A: å®šæœŸå¤‡ä»½dataç›®å½•ï¼Œé‡è¦æ•°æ®å»ºè®®å¯¼å‡ºä¿å­˜

### æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
tail -f logs/app.log

# ä½¿ç”¨PM2æŸ¥çœ‹æ—¥å¿—
pm2 logs order-robot
```

### æ•…éšœæ’æŸ¥
1. æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
2. ç¡®è®¤dataç›®å½•æƒé™æ˜¯å¦æ­£ç¡®
3. æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—ç¡®è®¤å®šæ—¶ä»»åŠ¡æ‰§è¡Œæƒ…å†µ

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-01-15)
- âœ… åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… æ™ºèƒ½èœå•ç”ŸæˆåŠŸèƒ½
- âœ… ç”¨æˆ·ç«¯å’Œç®¡ç†åå°
- âœ… å®šæ—¶ä»»åŠ¡å’Œæœºå™¨äººAPI
- âœ… æ•°æ®å¯¼å‡ºåŠŸèƒ½

## ğŸ“„ è®¸å¯è¯

MIT License - å¯è‡ªç”±ä½¿ç”¨å’Œä¿®æ”¹